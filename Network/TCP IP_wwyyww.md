# TCP/IP
## ▶ 📗 TCP란?
> 네트워크 통신에서 신뢰적인 연결방식

### 📌 특징
- 신뢰성 보장
- 연결 지향적
- 흐름제어와 혼잡제어를 지원해 데이터 순서를 보장한다.
`✔ 흐름 제어 : 송신 측과 수신 측의 데이터 처리 속도 차이를 조절`
`✔ 혼잡 제어 : 네트워크 내의 패킷 수가 넘치지 않게 방지`


### 흐름 제어 방식
- Stop and Wait : 매번 전송한 패킷에 대해 확인 응답을 받은 후 다음 패킷을 전송하는 방법
- Sliding Window : 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인응답 없이 세그먼트를 전송할 수 있게 해 데이터 흐름을 동적으로 조절하는 제어기법


### 혼잡 제어 방식
1. AIMD
- 패킷을 하나씩 보내고 문제없이 도착하면 window 크기를 1씩 증가시켜 전송하는 방법
- 패킷 전송에 실패하거나 일정 시간을 넘기면 패킷 전송 속도를 절반으로 줄임
- 단점 : 네트워크가 혼잡해지는 상황을 미리 감지하지 못함, 처음에 전송 속도를 올리는 데 시간이 오래 걸림

2. Slow Start
- 패킷을 하나씩 보내다가 문제없이 도착하면 ACK 패킷마다 window 크기를 1씩 증가시켜 전송하는 방법
- 혼잡 현상이 발생하면 window 크기를 1로 떨어뜨림
- 한 번 혼잡 현상이 발생하고 나면 네트워크의 수용량 에상 가능

3. Fast Retransmit (빠른 재전송)
- 패킷을 받는 쪽에서는 먼저 도착해야 할 패킷이 도착하지 않고 다음 패킷이 도착한 경우와 잘 도착한 경우에 ACK 패킷을 전송한다. 이때, 중간에 패킷이 손실되면 송신 측에서는 순번이 중복된 ACK 패킷을 받게 된다. 이 순간 문제가 되는 순번의 패킷을 재전송한다. 

4. Fast Recovery (빠른 회복)
- 혼잡한 상태가 되면 windown 크기를 1이 아닌 반으로 줄이고 선형 증가시키는 방법



## ▶ 📗 3-way handshaking이란?
> TCP가 정확한 전송을 위해 논리적인 접속을 성립하려고 진행하는 과정
1. 클라이언트가 서버에게 SYN 패킷 전송
2. 서버가 SYN을 받고 클라이언트에게 받았다는 신호인 ACK와 SYN 패킷 전송
3. 클라이언트는 서버에게 응답으로 ACK 패킷 전송


## ▶ 📗 4-way handshaking이란?
> 통신이 끝난 후 해제하는 과정
1. 클라이언트는 서버에게 연결을 종료한다는 FIN 플래그 전송
2. 서버는 FIN을 받고 확인했다는 ACK 전송
- 이때, 모든 데이터를 보내기 위해 CLOSE_WAIT 상태가 됨
3. 서버는 데이터를 모두 전송했다면 연결이 종료되었다는 FIN 플래그를 클라이언트에게 전송
- 서버로부터 못 받은 데이터가 있을 수 있기 때문에 TIME_WAIT을 통해 기다림
4. 클라이언트는 FIN을 받고 확인했다는 ACK를 서버에 전송

- 서버는 ACK를 받은 후 소켓을 닫는다.
- 클라이언트는 TIME_WAIT 시간이 끝나면 소켓을 닫는다.


## ▶ 📗 UDP란?
- TCP와 다르게 메시지를 패킷으로 나누고 재조립하는 서비스를 제공하지 않음
- 데이터를 주고 받을 컴퓨터끼리 직접 연결할 떄 UDP 사용
- TCP보다 속도가 빠르기 때문에 데이터 유실이 발생해도 상관없는 스트리밍, 화면 전송 등에 사용


### Reference
https://gyoogle.dev/blog/interview/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC.html